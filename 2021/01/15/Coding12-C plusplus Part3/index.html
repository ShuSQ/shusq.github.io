<!DOCTYPE html>
<html lang="en">
    <!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  
  <title>Coding12 - C++ Primer Part3 - Shu-Creative Computing</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/cursor.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
  
<link rel="stylesheet" href="/css/post.css">

  

<meta name="generator" content="Hexo 5.2.0"></head>


    <body>
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Shu&#39;s Blog</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/categories/essays">Thinking</a>
            
            
            
            <a class="nav-item" href="/categories/pcomp">Pcomp&amp;AVCE</a>
            
            
            
            <a class="nav-item" href="/categories/coding">Coding</a>
            
            
            
            <a class="nav-item" href="/categories/portfolio">Portfolio</a>
            
            
            
            <a class="nav-item" href="/contact">About</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/ShuSQ" target="_blank">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-codepen nav-item-icon" href="https://codepen.io/shusq" target="_blank">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-patreon nav-item-icon" href="https://www.instagram.com/cheese_shu/" target="_blank">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        <article class="post">
    <div class="meta">
        
        <div class="date" id="date">
            
            <span>January</span>
            
            
            
            
            
            
            
            
            
            
            
            
            <span>15,</span>
            <span>2021</span>
        </div>
        

        <h2 class="title">Coding12 - C++ Primer Part3</h2>
    </div>

    <div class="divider"></div>

    <div class="content">
        <blockquote>
<p>This is a C++ note for my own review and study.</p>
</blockquote>
<h3 id="二十一：C-指針和數組"><a href="#二十一：C-指針和數組" class="headerlink" title="二十一：C++指針和數組"></a>二十一：C++指針和數組</h3><p>在C++中，指針是保存其他變量地址的變量。指針不僅可以存儲單個變量的地址，還可以存儲數組的單元格地址。</p>
<p>參考以下示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ptr;</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// store the address of the first</span></span><br><span class="line"><span class="comment">// element of arr in ptr</span></span><br><span class="line">ptr = arr;</span><br></pre></td></tr></table></figure>

<p>這裡，<code>ptr</code>是一個指針變量，而<code>arr</code>是一個<code>int</code>類型的數組，代碼<code>ptr = arr;</code>將數組的<strong>第一個元素地址</strong>存儲在了變量<code>ptr</code>中。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ptr;</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">5</span>];</span><br><span class="line">ptr = &amp;arr[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<p>而我們需要獲取其他元素的地址，可以使用<code>&amp;arr[1]</code>，<code>&amp;arr[2]</code>，<code>&amp;arr[3]</code>。<code>&amp;arr[4]</code>。</p>
<h5 id="指向每個數組元素"><a href="#指向每個數組元素" class="headerlink" title="指向每個數組元素"></a>指向每個數組元素</h5><p>假設我們需要使用相同的指針指向數組的第四個元素<code>ptr</code>。</p>
<p>在這裡，如果<code>ptr</code>指向第一個元素，那麼<code>ptr + 3</code>則指向第四個元素。舉例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ptr;</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">5</span>];</span><br><span class="line">ptr = arr;</span><br><span class="line"></span><br><span class="line">ptr + <span class="number">1</span> is equivalent to &amp;arr[<span class="number">1</span>];</span><br><span class="line">ptr + <span class="number">2</span> is equivalent to &amp;arr[<span class="number">2</span>];</span><br><span class="line">ptr + <span class="number">3</span> is equivalent to &amp;arr[<span class="number">3</span>];</span><br><span class="line">ptr + <span class="number">4</span> is equivalent to &amp;arr[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<p>同樣，我們也可以說使用單個指針訪問元素。舉例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use dereference operator</span></span><br><span class="line">*ptr == arr[<span class="number">0</span>];</span><br><span class="line">*(ptr + <span class="number">1</span>) is equivalent to arr[<span class="number">1</span>];</span><br><span class="line">*(ptr + <span class="number">2</span>) is equivalent to arr[<span class="number">2</span>];</span><br><span class="line">*(ptr + <span class="number">3</span>) is equivalent to arr[<span class="number">3</span>];</span><br><span class="line">*(ptr + <span class="number">4</span>) is equivalent to arr[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<p>假設我們已經初始化，<code>ptr = &amp;arr[2]</code>，然後：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ptr - <span class="number">2</span> is equivalent to &amp;arr[<span class="number">0</span>];</span><br><span class="line">ptr - <span class="number">1</span> is equivalent to &amp;arr[<span class="number">1</span>];</span><br><span class="line">ptr + <span class="number">1</span> is equivalent to &amp;arr[<span class="number">3</span>];</span><br><span class="line">ptr + <span class="number">2</span> is equivalent to &amp;arr[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-pointers-and-arrays.png" style="zoom:75%;" />

<blockquote>
<p>注意，地址<code>ptr</code>和<code>ptr + 1</code>相差4個字節，因為int的大小為4個字節。</p>
<p>同樣，如果指針<code>ptr</code>指向<code>char</code>類型數據，<code>ptr</code>和<code>ptr + 1</code>差1個字節，因為字符的大小是一個字節。</p>
</blockquote>
<h5 id="示例一：C-指針和數組"><a href="#示例一：C-指針和數組" class="headerlink" title="示例一：C++指針和數組"></a>示例一：C++指針和數組</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ Program to display address of each element of an array</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> namepsace <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">float</span> arr[<span class="number">3</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// declare pointer variable</span></span><br><span class="line">  <span class="keyword">float</span> *ptr;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Displaying address using arrays: &quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// use for loop to print addresses of all array elements</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;&amp;arr[&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;] = &quot;</span> &lt;&lt; &amp;arr[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ptr = &amp;arr[0]</span></span><br><span class="line">  ptr = arr;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nDisplaying address using pointers: &quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// use for loop to print addresses of all array elements</span></span><br><span class="line">  <span class="comment">// using pointer notation</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;ptr + &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; ptr + i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Displaying address using arrays: </span></span><br><span class="line"><span class="comment">   &amp;arr[0] = 0x61fef0</span></span><br><span class="line"><span class="comment">   &amp;arr[1] = 0x61fef4</span></span><br><span class="line"><span class="comment">   &amp;arr[2] = 0x61fef8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   Displaying address using pointers: </span></span><br><span class="line"><span class="comment">   ptr + 0 = 0x61fef0</span></span><br><span class="line"><span class="comment">   ptr + 1 = 0x61fef4</span></span><br><span class="line"><span class="comment">   ptr + 2 = 0x61fef8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們打印了數組元素地址兩次，第一次沒有使用指針變量，第二次使用指針變量<code>ptr</code>，以及<code>ptr + i</code>等於<code>arr[0+i]</code>。</p>
<p>在大多數情況下，數組名稱會定義為指針名，這也是為什麼我們可以使用指針訪問數組元素。但是我們應該記住，指針和數組並不相同，在某些情況下，數組名稱不會變為指針。To learn more, visit: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17752978/exceptions-to-array-decaying-into-a-pointer">When does array name doesn’t decay into a pointer?</a></p>
<h5 id="示例二：數字名稱用作指針"><a href="#示例二：數字名稱用作指針" class="headerlink" title="示例二：數字名稱用作指針"></a>示例二：數字名稱用作指針</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ Program to insert and display data entered by using pointer notation.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">float</span> arr[<span class="number">5</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Insert data using pointer notation</span></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Enter 5 numbers: &quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// store input number in arr[i]</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; *(arr + i);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Display data using pointer notation</span></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Displaying data: &quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// display value of arr[i]</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *(arr + i) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Enter 5 numbers: 2.5</span></span><br><span class="line"><span class="comment">   3.5</span></span><br><span class="line"><span class="comment">   4.5</span></span><br><span class="line"><span class="comment">   5</span></span><br><span class="line"><span class="comment">   2</span></span><br><span class="line"><span class="comment">   Displaying data: </span></span><br><span class="line"><span class="comment">   2.5</span></span><br><span class="line"><span class="comment">   3.5</span></span><br><span class="line"><span class="comment">   4.5</span></span><br><span class="line"><span class="comment">   5</span></span><br><span class="line"><span class="comment">   2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>這裡，我們首先使用了指針符號來存儲數值。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span> &gt;&gt; *(arr + i);</span><br></pre></td></tr></table></figure>

<p>這個代碼也等於如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span> &gt;&gt; arr[i]</span><br></pre></td></tr></table></figure>

<p>同樣的使用<code>for</code>循環來顯示<code>arr</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; *(arr + i) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p>等效於：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="二十二：C-指針與函數"><a href="#二十二：C-指針與函數" class="headerlink" title="二十二：C++指針與函數"></a>二十二：C++指針與函數</h3><p>在C++函數中，我們學習了將參數傳遞給函數的知識，因為傳遞了實際值，所以該方法稱為按值傳遞。</p>
<p>但是還有另外一種將參數傳遞給函數的方法，不傳遞參數的實際值，而是傳遞對值的引用，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function that takes value as parameter</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">int</span> numVal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function that takes reference as parameter</span></span><br><span class="line"><span class="comment">// notice the &amp; before the parameter</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">(<span class="keyword">int</span> &amp;numRef)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">5</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// pass by value</span></span><br><span class="line">  func1(num);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// pass by reference</span></span><br><span class="line">  func2(num);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在函數<code>void func2(int &amp;numRef)</code>中，我們正在使用變量的地址作為參數。</p>
<p>因此，當我們通過傳遞變量來調用<code>func2()</code>時，我們實際上是傳遞了<code>num</code>而不是數值5。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-pass-by-reference.png" style="zoom:50%;" />

<h5 id="示例一：不帶指針的引用傳遞"><a href="#示例一：不帶指針的引用傳遞" class="headerlink" title="示例一：不帶指針的引用傳遞"></a>示例一：不帶指針的引用傳遞</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function definition to swap values</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;n1, <span class="keyword">int</span> &amp;n2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> temp;</span><br><span class="line">  temp = n1;</span><br><span class="line">  n1 = n2;</span><br><span class="line">  n2 = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// initialize variables</span></span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Before swapping&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// call function to swap numbers</span></span><br><span class="line">  swap(a, b);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nAfter swapping&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Before swapping</span></span><br><span class="line"><span class="comment">   a = 1</span></span><br><span class="line"><span class="comment">   b = 2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   After swapping</span></span><br><span class="line"><span class="comment">   a = 2</span></span><br><span class="line"><span class="comment">   b = 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們傳遞了<code>a</code>和<code>b</code>到函數<code>swap()</code>中，注意函數定義：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;n1, <span class="keyword">int</span> &amp;n2)</span></span>;</span><br></pre></td></tr></table></figure>

<p>這裡，我們使用了<code>&amp;</code>來表示函數接受地址作為參數。</p>
<p>因此編譯器可以識別變量的引用被傳遞給函數參數，而不是實際值。</p>
<p>在<code>swap()</code>函數中，函數參數<code>n1</code>和<code>n2</code>指向與變量<code>a</code>和<code>b</code>相同的值，實際發生了數值交換。</p>
<h5 id="示例二：使用指針傳遞引用"><a href="#示例二：使用指針傳遞引用" class="headerlink" title="示例二：使用指針傳遞引用"></a>示例二：使用指針傳遞引用</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function prototype with pointer as parameters</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>*, <span class="keyword">int</span>*)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// initialize variables</span></span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Before swapping&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// call function by passing variable addresses</span></span><br><span class="line">  swap(&amp;a, &amp;b);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nAfter swapping&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fucntion definition to swap numbers</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* n1, <span class="keyword">int</span>* n2)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> temp;</span><br><span class="line">  temp = *n1;</span><br><span class="line">  *n1 = *n2;</span><br><span class="line">  *n2 = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Before swapping</span></span><br><span class="line"><span class="comment">   a = 1</span></span><br><span class="line"><span class="comment">   b = 2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   After swapping</span></span><br><span class="line"><span class="comment">   a = 2</span></span><br><span class="line"><span class="comment">   b = 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>我們的輸出與上一個示例相同，注意這裡：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &amp;a is address of a </span></span><br><span class="line"><span class="comment">// &amp;b is address of b</span></span><br><span class="line">swap(&amp;a, &amp;b);</span><br></pre></td></tr></table></figure>

<p>變量的地址是在函數調用期間傳遞的，而不是在變量傳遞時傳遞的，由於傳遞的是地址而不是值，因此必須使用<code>*</code>來訪問存儲在該地址中的值。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp = *n1;</span><br><span class="line">*n1 = *n2;</span><br><span class="line">*n2 = temp;</span><br></pre></td></tr></table></figure>

<p><code>*n1</code>和<code>*n2</code>是地址中存儲的<code>n1</code>和<code>n2</code>值。因為<code>n1</code>和<code>n2</code>包括了<code>a</code>和<code>b</code>的地址，任何改變<code>*n1</code>和<code>*n2</code>的都會改變<code>a</code>和<code>b</code>實際的值。</p>
<p>因此，當我們在<code>main()</code>函數中打印<code>a</code>和<code>b</code>的函數，變量會被改變。</p>
<hr>
<h3 id="二十三：C-內存管理"><a href="#二十三：C-內存管理" class="headerlink" title="二十三：C++內存管理"></a>二十三：C++內存管理</h3><p>C++允許我們在分配變量或數組的內存，這稱為動態內存分配。</p>
<p>在其他語言中(Java/Python)中，編譯器自動管理分配給變量內存，在C++中，我們不需要使用變量後，則需要手動釋放動態分配的內存。我們可以使用<code>new</code>和<code>delete</code>運算符動態分配和釋放內存。</p>
<h5 id="C-運算符-new"><a href="#C-運算符-new" class="headerlink" title="C++運算符 new"></a>C++運算符 new</h5><p><code>new</code>操作會給存儲器分配一個變量，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// declare an int pointer</span></span><br><span class="line"><span class="keyword">int</span>* pointVar;</span><br><span class="line"></span><br><span class="line"><span class="comment">// dynamically allocate memory</span></span><br><span class="line"><span class="comment">// using the new keyword</span></span><br><span class="line">pointVar = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// assign value to allocated memory</span></span><br><span class="line">*pointVar = <span class="number">45</span>;</span><br></pre></td></tr></table></figure>

<p>在這裡，我們已使用<code>new</code>給<code>int</code>動態分配了內存。</p>
<p>主義，我們已經使用了指針<code>pointVar</code>動態分配內存，因為<code>new</code>操作返回了存儲位置的地址。對於數組<code>new</code>運算符返回數組第一個元素的地址。</p>
<p>從上面的示例中，我們可以翻到使用了<code>new</code>運算符的語法是：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pointerVariable = <span class="keyword">new</span> dataType;</span><br></pre></td></tr></table></figure>

<h5 id="C-運算符-delete"><a href="#C-運算符-delete" class="headerlink" title="C++運算符 delete"></a>C++運算符 delete</h5><p>一旦不再需要使用動態聲明的變量，就可以釋放該變量佔用的內存。為此，我們需要使用<code>delete</code>運算符，它將內存返回操作系統，這稱為<strong>內存釋放（memory deallocation）</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> pointerVariable;</span><br></pre></td></tr></table></figure>

<p>參考下面這段代碼：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// declare an int pointer</span></span><br><span class="line"><span class="keyword">int</span>* pointVar</span><br><span class="line">  </span><br><span class="line"><span class="comment">// dynamically allocate memory</span></span><br><span class="line"><span class="comment">// for an int variable</span></span><br><span class="line">pointVar = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// assign value to the variable memory</span></span><br><span class="line">*pointVar = <span class="number">45</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// print the value stored in memory</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *pointVar; <span class="comment">// Output: 45</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// deallocate the memory</span></span><br><span class="line"><span class="keyword">delete</span> memory;</span><br></pre></td></tr></table></figure>

<p>在這裡，我們通過<code>pointVar</code>動態釋放了<code>int</code>的內存。在打印了<code>pointVar</code>之後，我們使用<code>delete</code>釋放了內存。</p>
<blockquote>
<p>如果程序中<code>new</code>使用了太多不希望的內存，系統可能會崩潰，因為沒有可用的存儲空間了，我們可以通過<code>delete</code>方法來避免這樣的情況。</p>
</blockquote>
<h5 id="示例一：C-動態存儲釋放"><a href="#示例一：C-動態存儲釋放" class="headerlink" title="示例一：C++動態存儲釋放"></a>示例一：C++動態存儲釋放</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// declare an int pointer</span></span><br><span class="line">  <span class="keyword">int</span>* pointInt;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// declare a float pointer</span></span><br><span class="line">  <span class="keyword">float</span>* pointFloat;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// dynamically allocate memory</span></span><br><span class="line">  pointInt = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">  pointFloat = <span class="keyword">new</span> <span class="keyword">float</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// assigning value to the memory</span></span><br><span class="line">  *pointInt = <span class="number">45</span>;</span><br><span class="line">  *pointFloat = <span class="number">45.45f</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; *pointInt &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; *pointFloat &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// deallocate the memory</span></span><br><span class="line">  <span class="keyword">delete</span> pointInt, pointFloat;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 45</span></span><br><span class="line"><span class="comment">	 45.45</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們動態釋放了兩個類型變量<code>int</code>和<code>float</code>的內存。在分配數值和打印之後，我們使用<code>delete</code>來釋放內存。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> pointInt, pointFloat;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>動態內存釋放可以讓內存管理更有效。特別是對數組而言，我們只有運行時才能知道數組的大小。</p>
</blockquote>
<h5 id="示例二：C-數組的new-amp-delete"><a href="#示例二：C-數組的new-amp-delete" class="headerlink" title="示例二：C++數組的new&amp;delete"></a>示例二：C++數組的new&amp;delete</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ Program to store GPA of n number of students and display it</span></span><br><span class="line"><span class="comment">// where n is the number of students entered by the user</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Enter total number of students: &quot;</span>;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; num;</span><br><span class="line">  <span class="keyword">float</span>* ptr;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// memory allocation of num number of floats</span></span><br><span class="line">  ptr = <span class="keyword">new</span> <span class="keyword">float</span>[num];</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Enter GPA of students.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num ++i) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Student&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;: &quot;</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; *(ptr + i);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nDisplaying GPA of students.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Student&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot; :&quot;</span> &lt;&lt; *(ptr + i) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ptr memory is released</span></span><br><span class="line">  <span class="keyword">delete</span> [] ptr;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Enter total number of students: 4</span></span><br><span class="line"><span class="comment">   Enter GPA of students.</span></span><br><span class="line"><span class="comment">   Student1: 3.6</span></span><br><span class="line"><span class="comment">   Student2: 3.1</span></span><br><span class="line"><span class="comment">   Student3: 3.9</span></span><br><span class="line"><span class="comment">   Student4: 2.9</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   Displaying GPA of students.</span></span><br><span class="line"><span class="comment">   Student1 :3.6</span></span><br><span class="line"><span class="comment">   Student2 :3.1</span></span><br><span class="line"><span class="comment">   Student3 :3.9</span></span><br><span class="line"><span class="comment">   Student4 :2.9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們詢問了用戶學生總數，並且存儲在了num變量中。</p>
<p>然後，我們通過<code>new</code>分配了<code>float</code>的內存。通過指針運算符將數據放入了數組。</p>
<p>在我們不需要數組之後，我們釋放了數組的內存，通過使用<code>delete [] ptr</code>。</p>
<p>在<code>delete</code>之後使用<code>[]</code>，我們使用<code>[]</code>來表示時數組的釋放。</p>
<h5 id="示例三：C-對象的new-amp-delete"><a href="#示例三：C-對象的new-amp-delete" class="headerlink" title="示例三：C++對象的new&amp;delete"></a>示例三：C++對象的new&amp;delete</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> age;</span><br><span class="line">  </span><br><span class="line">  poblic:</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// constructor initializes age to 12</span></span><br><span class="line">  Student() : age(<span class="number">12</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Age = &quot;</span> &lt;&lt; age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// dynamically declare Student object</span></span><br><span class="line">  Student* ptr = <span class="keyword">new</span> Student();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// call getAge() function</span></span><br><span class="line">  ptr-&gt;getAge();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ptr memory is released</span></span><br><span class="line">  <span class="keyword">delete</span> ptr;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Age = 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們創建了一個類<code>Student</code>，包含私有變量<code>age</code>。我們初始化<code>age</code>到構造函數<code>Student()</code>並使用函數<code>getAge()</code>打印值。</p>
<p>在<code>main()</code>中，我們使用<code>new</code>創建<code>Student</code>對象，並使用指針<code>ptr</code>指向它的地址。創建對象後，構造函數<code>Student()</code>會把age初始化為12。然後我們<code>getAge()</code>會調用下面這個函數:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ptr-&gt;getAge();</span><br><span class="line"><span class="comment">// equal as below code:</span></span><br><span class="line">(*ptr).getAge();</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="二十四：C-繼承"><a href="#二十四：C-繼承" class="headerlink" title="二十四：C++繼承"></a>二十四：C++繼承</h3><p>在C++中，繼承時面向對象編程的重要功能，它允許我們從現存的類中創建新的類。</p>
<p>派生類繼承了基類的功能，並且可以擁有自己的其他功能，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  <span class="comment">// eat() function</span></span><br><span class="line">  <span class="comment">// sleep() function</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  <span class="comment">// bark() function</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>類<code>Dog</code>是從類<code>Animal</code>派生出來的，所以<code>Animal</code>的成員也可以在<code>Dog</code>中訪問。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-inheritance.png" style="zoom:50%;" />

<p>在從<code>Animal</code>中繼承時，使用了關鍵字<code>public</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;...&#125;;</span><br></pre></td></tr></table></figure>

<p>我們還可以使用關鍵字<code>private</code>和<code>protected</code>。我們將學習他們之間的差異，並在之後的教程中使用。</p>
<p>繼承是一種關係，僅在兩個類之間存在is-a關係是才可以使用，例如：</p>
<p>橘子是一種水果，外科醫生是醫生，🐶是動物。</p>
<h5 id="示例一：C-繼承的簡單示例"><a href="#示例一：C-繼承的簡單示例" class="headerlink" title="示例一：C++繼承的簡單示例"></a>示例一：C++繼承的簡單示例</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate inheritance</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// base class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can eat!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can sleep!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// derived class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can bark! Woof woof!!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Create object of the Dog class</span></span><br><span class="line">  Dog dog1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Calling members of the base class</span></span><br><span class="line">  dog1.eat();</span><br><span class="line">  dog1.sleep();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Calling member of the derived class</span></span><br><span class="line">  dog1.bark();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   I can eat!</span></span><br><span class="line"><span class="comment">   I can sleep!</span></span><br><span class="line"><span class="comment">   I can bark! Woof woof!!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><code>dog1</code>可以訪問基類<code>Animal</code>的所有成員，因為<code>Dog</code>是<code>Animal</code>的派生。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Calling members of the Animal class</span></span><br><span class="line">dog1.eat();</span><br><span class="line">dog1.sleep();</span><br></pre></td></tr></table></figure>

<p>訪問<code>protected</code>保護的成員在C++繼承時尤其重要。</p>
<p>像<code>private</code>成員一樣，<code>protected</code>在類之外無法訪問，但是可以通過派生的類和友類/函數來訪問。</p>
<p><code>protected</code>如果我們想隱藏一個類的數據，但仍希望數據被派生類繼承，則需要成員。</p>
<h5 id="示例二：C-protected-Members"><a href="#示例二：C-protected-Members" class="headerlink" title="示例二：C++ protected Members"></a>示例二：C++ protected Members</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate protected members</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// base class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> color;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  	<span class="built_in">string</span>: type;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can eat!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can sleep!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="built_in">string</span> clr)</span> </span>&#123;</span><br><span class="line">      color = clr;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">	  <span class="function"><span class="built_in">string</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line"> 	 &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// derived class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">setType</span><span class="params">(<span class="built_in">string</span> yp)</span> </span>&#123;</span><br><span class="line">      type = tp;</span><br><span class="line">    &#125;</span><br><span class="line">  	</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">displayInfo</span><span class="params">(<span class="built_in">string</span> c)</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I am a &quot;</span> &lt;&lt; type &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;My color is &quot;</span> &lt;&lt; c &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">bark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;I can bark! Woof woof!!&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Create object of the Dog class</span></span><br><span class="line">  Dog dog1</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// Calling members of the base class</span></span><br><span class="line">  dog1.eat();</span><br><span class="line">  dog1.sleep();</span><br><span class="line">  dog1.setColor(<span class="string">&quot;black&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Calling member of the derived class</span></span><br><span class="line">  dog1.bark();</span><br><span class="line">  dog1.setType(<span class="string">&quot;mammal&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Using getColor() of dog1 as argument</span></span><br><span class="line">  <span class="comment">// getColor() returns string data</span></span><br><span class="line">  dog1.displayInfo(dog1.getColor());</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   I can eat!</span></span><br><span class="line"><span class="comment">   I can sleep!</span></span><br><span class="line"><span class="comment">   I can bark! Woof woof!!</span></span><br><span class="line"><span class="comment">   I am a mammal</span></span><br><span class="line"><span class="comment">   My color is black</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>變量<code>type</code>是<code>protected</code>，可以從派生類<code>Dog</code>訪問。我們可以看到這個在<code>Dog</code>中被我們使用函數<code>setType()</code>初始化。</p>
<p>另一方面，<code>privated</code>變量<code>color</code>不能在<code>Dog</code>中初始化。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="built_in">string</span> clr)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// Error : member &quot;Animal::color&quot; is inaccessible</span></span><br><span class="line">      color = clr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>關鍵字<code>protected</code>隱藏數據，我們不能直接從對象<code>Dog</code>或類<code>Animal</code>訪問。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Error: member &quot;Animal::type&quot; is inaccessable</span></span><br><span class="line">dog1.type = <span class="string">&quot;mammal&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="C-繼承中的訪問模式"><a href="#C-繼承中的訪問模式" class="headerlink" title="C++繼承中的訪問模式"></a>C++繼承中的訪問模式</h5><p>我們可以通過<code>public</code>來訪問類，也可以通過關鍵字<code>private</code>和<code>protected</code>繼承類，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">private</span> Animal &#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> :</span> <span class="keyword">protected</span> Animal &#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我們把這種設定派生類的方法稱為**訪問模式(Access Modes)**。</p>
<ol>
<li><strong>public</strong>：如果在<code>public</code>模式吸納聲明了派生類，則派生類將繼承基類的成員。</li>
<li><strong>private</strong>：基類的所有成員都會在派生類中變成<code>private</code>。</li>
<li><strong>protected</strong>：基類中的成員都會在派生類中變成<code>protected</code>。</li>
</ol>
<h5 id="繼承中的成員函數重寫"><a href="#繼承中的成員函數重寫" class="headerlink" title="繼承中的成員函數重寫"></a>繼承中的成員函數重寫</h5><p>假設基類和派生類的成員函數具有相同的名稱和參數。</p>
<p>如果我們創建派生類的對象並嘗試訪問該成員函數，則將調用派生類中的成員函數，而不是基類中的成員函數，派生類中的成員函數將覆蓋基類的成員函數。</p>
<hr>
<h3 id="二十五：C-繼承訪問控制"><a href="#二十五：C-繼承訪問控制" class="headerlink" title="二十五：C++繼承訪問控制"></a>二十五：C++繼承訪問控制</h3><p>在C++繼承中，我們可以在不同的訪問模式下從基類派生一個子類，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>public</code>是代碼中的關鍵字：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br></pre></td></tr></table></figure>

<p>這意味著我們從公共模式下，從基類創建了派生類。另外，我們也可從protected和private模式派生類。</p>
<p>這三個關鍵字<code>public</code>, <code>protected</code>和<code>private</code>在C++中被稱為**訪問說明符(access specifiers)**。</p>
<h5 id="C-中的public-protected-amp-private繼承"><a href="#C-中的public-protected-amp-private繼承" class="headerlink" title="C++中的public, protected&amp;private繼承"></a>C++中的public, protected&amp;private繼承</h5><p>三種繼承具有以下的特點：</p>
<ul>
<li><p><strong>public inheritance</strong>派生類會繼承基類的<code>public</code>和<code>protected</code>。</p>
</li>
<li><p><strong>protected inheritance</strong>基類的<code>public</code>和<code>protected</code>會在派生類中以<code>protected</code>存在。</p>
</li>
<li><p><strong>private inheritance</strong>基類的<code>public</code>和<code>protected</code>會在派生類中以<code>private</code>存在。</p>
</li>
</ul>
<blockquote>
<p><strong>NOTE</strong></p>
<p>派生類無法訪問基類的<code>private</code>成員。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">calss Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  		<span class="keyword">int</span> x;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  		<span class="keyword">int</span> y;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  		<span class="keyword">int</span> z;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PublicDerived</span>:</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="comment">// x is public</span></span><br><span class="line">  <span class="comment">// y is protected</span></span><br><span class="line">  <span class="comment">// z is not accessible from PublicDerived</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProtectedDerived</span>:</span> <span class="keyword">protected</span> Base &#123;</span><br><span class="line">  <span class="comment">// x is protected</span></span><br><span class="line">  <span class="comment">// y is protected</span></span><br><span class="line">  <span class="comment">// z is not accessible from ProtectedDerived</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrivateDerived</span>:</span> <span class="keyword">private</span> Base &#123;</span><br><span class="line">  <span class="comment">// x is private</span></span><br><span class="line">  <span class="comment">// y is private</span></span><br><span class="line">  <span class="comment">// z is not accessible from PrivateDerived</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="示例一：C-public-Inheritance"><a href="#示例一：C-public-Inheritance" class="headerlink" title="示例一：C++ public Inheritance"></a>示例一：C++ public Inheritance</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate the working of public inheritance</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> pvt = <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">	<span class="keyword">int</span> prot = <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">int</span> pub = <span class="number">3</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// function to access private member</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getPVT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pvt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PublicDerived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">// function to access protected member from Base</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getProt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      	<span class="keyword">return</span> prot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  	PublicDerived object1;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private = &quot;</span> &lt;&lt; object1.getPVT() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Protected = &quot;</span> &lt;&lt; object1.getPVT() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Public = &quot;</span> &lt;&lt; object1.pub &lt;&lt; end;</span><br><span class="line"> 		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Private = 1</span></span><br><span class="line"><span class="comment">	 Protected = 2</span></span><br><span class="line"><span class="comment">	 Public = 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這裡，我們得到的<code>PublicDerived</code>來自於<code>Base</code>的公共模式。</p>
<p>在<code>PublicDerived</code> 中：</p>
<p>1.<code>prot</code>被作為protected模式繼承。</p>
<p>2.<code>pub</code>和<code>getPVT</code>作為public模式繼承。</p>
<p>3.<code>pvt</code>不能被訪問，因為是<code>Base</code>裡面的私有成員。</p>
<p>雖然private和protected成員不能被訪問，但是我們可以創建public函數<code>getPVT()</code>和<code>getProt()</code>來訪問他們:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Error: member &quot;Base::pvt&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private = &quot;</span> &lt;&lt; object1.pvt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error: member &quot;Base::prot&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Protected = &quot;</span> &lt;&lt; object1.prot;</span><br></pre></td></tr></table></figure>

<h5 id="示例二：C-protected-Inheritance"><a href="#示例二：C-protected-Inheritance" class="headerlink" title="示例二：C++ protected Inheritance"></a>示例二：C++ protected Inheritance</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate the working of protected inheritance</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="keyword">int</span> pvt = <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  	<span class="keyword">int</span> prot = <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="keyword">int</span> pub = <span class="number">3</span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// function to access private member</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getPVT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> pvt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProtectedDerived</span> :</span> <span class="keyword">protected</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="comment">// function to access protected member from Base</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getProt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> prot;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// function to access public member from Base</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getPub</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> pub;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ProtectedDerived object1;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private cannot be accessed.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Protected = &quot;</span> &lt;&lt; object1.getProt() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Public = &quot;</span> &lt;&lt; object1.getPub() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Private cannot be accessed.</span></span><br><span class="line"><span class="comment">   Protected = 2</span></span><br><span class="line"><span class="comment">   Public = 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在<code>ProtectedDerived</code>中：</p>
<ul>
<li><code>prot</code>, <code>pub</code>和<code>getPVT()</code>被作為protected繼承。</li>
<li><code>pvt</code>不能被訪問，因為是private。</li>
</ul>
<p>眾所周知，protected成員不能被直接訪問。</p>
<p>我們不能從<code>ProtectedDerived</code>中使用<code>getPVT()</code>。這也是為什麼我們需要創建<code>getPub()</code>函數來訪問<code>ProtectedDerived</code>中的<code>pub</code>變量。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Error: member &quot;Base::getPVT()&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private = &quot;</span> &lt;&lt; object1.getPVT();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error: member &quot;Base::pub&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Public = &quot;</span> &lt;&lt; object1.pub;</span><br></pre></td></tr></table></figure>

<h5 id="C-private-Inheritance"><a href="#C-private-Inheritance" class="headerlink" title="C++ private Inheritance"></a>C++ private Inheritance</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate the working of private inheritance</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="keyword">int</span> pvt = <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  <span class="keyword">int</span> prot = <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">int</span> pub = <span class="number">3</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// function to access private member</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getPVT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pvt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrivateDerived</span> :</span> <span class="keyword">private</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="comment">// function to access protected member from Base</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getProt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> prot;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"> 	  <span class="comment">// function to access private member</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">getPub</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> pub;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  PrivateDerived object1;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private cannot be accessed.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Protected = &quot;</span> &lt;&lt; object1. getProt() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Public = &quot;</span> &lt;&lt; object1.getPub() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Private cannot be accessed.</span></span><br><span class="line"><span class="comment">   Protected = 2</span></span><br><span class="line"><span class="comment">   Public = 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>這裡，我們通過private模式從<code>Base</code>派生了<code>PrivateDerived</code>。</p>
<p>在<code>PrivateDerived</code> 中：</p>
<ul>
<li><code>prot</code>，<code>pub</code>和<code>getPVT()</code>作為private被繼承。</li>
<li><code>pvt</code>因為在<code>Base</code>中是私有的所有不能被訪問。</li>
</ul>
<p>所以我們不能在<code>PrivateDerived</code>中使用<code>getPVT()</code>，這也是為什麼我們需要在<code>PrivateDerived</code>創建<code>getPub()</code>函數來獲取<code>pub</code>變量。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Error: member &quot;Base::getPVT()&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Private = &quot;</span> &lt;&lt; object1.getPVT();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error: member &quot;Base::pub&quot; is inaccessible</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Public = &quot;</span> &lt;&lt; object1.pub;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="二十六：C-函數覆蓋"><a href="#二十六：C-函數覆蓋" class="headerlink" title="二十六：C++函數覆蓋"></a>二十六：C++函數覆蓋</h3><p>眾所周知，繼承是OOP的一項功能，它讓我們可以從基類創建派生類，派生類繼承基類的功能。</p>
<p>假設在派生類和基類中都定義了相同的函數。現在，如果我們使用派生類的對象調用此函數，則執行派生類的函數。</p>
<p>這在C++中稱為<strong>函數覆蓋（function overriding）</strong>，派生類中的函數將覆蓋基類中的函數。</p>
<h5 id="示例一：C-Function-Overriding"><a href="#示例一：C-Function-Overriding" class="headerlink" title="示例一：C++ Function Overriding"></a>示例一：C++ Function Overriding</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ progam to demonstrate function overriding</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1;</span><br><span class="line">  derived1.print();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Derived Function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這裡<code>print()</code> 在<code>Base</code>和<code>Derived</code>中都有被定義。當我們喚起<code>print()</code>函數時，會因為<code>Derived</code>中覆蓋了<code>Base</code>的函數，而執行<code>Derived</code>的函數。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-function-overriding.png" style="zoom:50%;" />

<p>訪問C++中的覆蓋函數，訪問基類中的被覆蓋函數，我們會使用範圍解析運算符<code>::</code>。</p>
<p>我們也可以訪通過基類的指針指向派生類的對象，然後從指針調用函數來訪問，覆蓋的函數。</p>
<h5 id="示例二：C-Function-Overriding"><a href="#示例二：C-Function-Overriding" class="headerlink" title="示例二：C++ Function Overriding"></a>示例二：C++ Function Overriding</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to access overridden function</span></span><br><span class="line"><span class="comment">// in main() using the scope resolution operator ::</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1, derived2;</span><br><span class="line">  derived1.print();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// access print() function of the Base class</span></span><br><span class="line">  derived2.Base::print();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Deirived Function</span></span><br><span class="line"><span class="comment">	 Base Function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>我們通過設置作用域來訪問基類函數：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">derived2.Base::print();</span><br></pre></td></tr></table></figure>

<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-access-overridden-function-using-object.png" style="zoom:50%;" />

<h5 id="示例三：C-從派生類調用重寫函數"><a href="#示例三：C-從派生類調用重寫函數" class="headerlink" title="示例三：C++從派生類調用重寫函數"></a>示例三：C++從派生類調用重寫函數</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to call teh overridden function</span></span><br><span class="line"><span class="comment">// from a member function of the derived class</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// call overridden function</span></span><br><span class="line">      Base::print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1;</span><br><span class="line">  derived1.print();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Derived Function</span></span><br><span class="line"><span class="comment">	 Base Function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們調用了被覆蓋的函數在<code>Derived</code>類自身完成。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      Base::print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>Base::print()</code>在<code>Derived</code>類中調用了覆蓋函數。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-access-overridden-function-inside-derived-class.png" style="zoom:50%;" />

<h5 id="C-通過指針調用重寫函數"><a href="#C-通過指針調用重寫函數" class="headerlink" title="C++通過指針調用重寫函數"></a>C++通過指針調用重寫函數</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to access overridden function using pointer</span></span><br><span class="line"><span class="comment">// of Base type that points to an object of Derived class</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#inlcude <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// pointer of Base type taht points to derived1</span></span><br><span class="line">  Base* ptr = &amp;derived1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// call function of Base class using ptr</span></span><br><span class="line">  ptr-&gt;print();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Base Function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在這個程序中，我們創建了<code>Base</code>的指針<code>ptr</code>，這個指針指向<code>Derived</code>對象的<code>derived1</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pointer of Base type that points to derived1</span></span><br><span class="line">Base* ptr = &amp;derived1;</span><br></pre></td></tr></table></figure>

<p>當我們使用指針調用<code>print()</code>函數，它會調用<code>Base</code>被覆蓋的函數。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// call function of Base class using ptr</span></span><br><span class="line">ptr-&gt;print();</span><br></pre></td></tr></table></figure>

<p>這是因為<code>ptr</code>雖然指向<code>Derived</code>對象，但是實際上是<code>Base</code>的類型，所以調用的成員函數是<code>Base</code>。</p>
<p>為了覆蓋<code>Base</code>函數而不是訪問它，我們需要使用<code>Base</code>中的虛函數。</p>
<hr>
<h3 id="二十七：C-繼承類型"><a href="#二十七：C-繼承類型" class="headerlink" title="二十七：C++繼承類型"></a>二十七：C++繼承類型</h3><p>繼承是面向對象編程語言的核心功能之一。它允許軟件開發人員從現有的類派生處一個新的類。派生類繼承基類的功能。</p>
<p>C++編程中有多種繼承模型。</p>
<h5 id="C-多層繼承-Multilevel-Inheritance"><a href="#C-多層繼承-Multilevel-Inheritance" class="headerlink" title="C++多層繼承 Multilevel Inheritance"></a>C++多層繼承 Multilevel Inheritance</h5><p>在C++程序中，你不僅可以從一個基類派生出一個類，你也可以從一個派生類中派生類，這種繼承形式被稱為<strong>多層繼承（multilevel inheritance）</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span> <span class="keyword">public</span> B</span><br><span class="line">&#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡，<code>B</code>是從基類<code>A</code>中派生的，<code>C</code>是從<code>B</code>中派生的。</p>
<h5 id="示例一：C-多層繼承"><a href="#示例一：C-多層繼承" class="headerlink" title="示例一：C++多層繼承"></a>示例一：C++多層繼承</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base class content.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> :</span> <span class="keyword">public</span> B</span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  C obj;</span><br><span class="line">  obj.display();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Base class content.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在項目中，類<code>C</code>是<code>B</code>的派生，<code>B</code>是<code>A</code>的派生。</p>
<p>類<code>C</code>的<code>obj</code>對象是被定義在<code>main()</code>的函數。當<code>display()</code>函數被調用，<code>display()</code>在類<code>A</code>中存在，所以會執行<code>A</code>中的函數，而如果C中有<code>displa()</code>函數，則會執行<code>C</code>中的函數，這個過程是函數覆蓋。</p>
<h5 id="C-多重繼承"><a href="#C-多重繼承" class="headerlink" title="C++多重繼承"></a>C++多重繼承</h5><p>在C++程序中，一個類可以被派生通過超過一個的父級類。例如一個類<code>Bat</code>可以被從基類<code>Mammal</code>和<code>WingedAnimal</code>派生。因為蝙蝠是mammal也是winged animal。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/multiple-inheritance-example.jpg" style="zoom:50%;" />

<h5 id="C-多重繼承-Multiple-Inheritance"><a href="#C-多重繼承-Multiple-Inheritance" class="headerlink" title="C++多重繼承 Multiple Inheritance"></a>C++多重繼承 Multiple Inheritance</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mammal</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	Mammal()</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Mammals can give direct birth.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WingedAnimal</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	WingedAnimal()</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Winged animal can flap.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bat</span>:</span> <span class="keyword">public</span> Mammal, <span class="keyword">public</span> WingedAnimal &#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Bat b1;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Mammals can give direct birth.</span></span><br><span class="line"><span class="comment">	 Winged animal can flap.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="多重繼承中的歧義"><a href="#多重繼承中的歧義" class="headerlink" title="多重繼承中的歧義"></a>多重繼承中的歧義</h5><p>多重繼承最明顯的問題發生在函數覆蓋期間。</p>
<p>假設兩個基類具有相同的函數，但在派生類中未重寫該函數。</p>
<p>如果嘗試使用派生配的對象調用該函數，則編譯器會顯示錯誤。這是因為編譯器不知道該調用哪個函數。例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">base1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;... .. ...&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">base2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;... .. ...&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">derived</span> :</span> <span class="keyword">public</span> base1, <span class="keyword">public</span> base2</span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  derived obj;</span><br><span class="line">  </span><br><span class="line">  obj.someFunction() <span class="comment">// Error!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這個問題可以通過使用範圍解析函數來處理，選擇類<code>base1</code>或者類<code>base2</code>的函數。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  obj.base1::someFunction(); <span class="comment">// Function of base1 class is called</span></span><br><span class="line">  obj.base2::someFunction(); <span class="comment">// Function of base2 class is called</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-層次繼承-Hierarchical-Inheritance"><a href="#C-層次繼承-Hierarchical-Inheritance" class="headerlink" title="C++層次繼承 Hierarchical Inheritance"></a>C++層次繼承 Hierarchical Inheritance</h5><p>如果從基類繼承多個類，則稱為層次繼承。在分層繼承中，子類中共有的所有函數都包含在基類中。</p>
<p>例如：物理，化學，生物，都來自科學學科。</p>
<p>層次繼承的語法如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">base_class</span> &#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">first_derived_class</span>:</span> <span class="keyword">public</span> base_class &#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">second_derived_class</span>:</span> <span class="keyword">public</span> base_class &#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">third_derived_class</span>:</span> <span class="keyword">public</span> base_class &#123;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="二十八：C-友函數與友類"><a href="#二十八：C-友函數與友類" class="headerlink" title="二十八：C++友函數與友類"></a>二十八：C++友函數與友類</h3><p>數據隱藏是面向對象編程的基本概念。它限制了類外部對private成員的訪問。</p>
<p>同樣，protected成員只能由派生類訪問，並且不能從外部訪問。例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="keyword">int</span> member1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  MyClass obj;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Error! Cannot access private members from here.</span></span><br><span class="line">  obj.member1 = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是C++中有一個稱為友函數的函數，可以打破規則，允許我們從外部訪問類的成員函數。同樣還有一個友類，我們在後半部分學習。</p>
<h5 id="C-友函數-friend-Function"><a href="#C-友函數-friend-Function" class="headerlink" title="C++友函數 friend Function"></a>C++友函數 friend Function</h5><p>一個友函數可以訪問類的<code>privat</code>e和<code>protected</code>數據。我們<code>friend</code>在類的主體中使用關鍵字聲明這是一個友函數。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">className</span> &#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">  <span class="function"><span class="keyword">friend</span> returnType <span class="title">functionName</span><span class="params">(arguments)</span></span>;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="示例一：Woring-of-friend-Function"><a href="#示例一：Woring-of-friend-Function" class="headerlink" title="示例一：Woring of friend Function"></a>示例一：Woring of friend Function</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Distance</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="keyword">int</span> meter;</span><br><span class="line">  	</span><br><span class="line">  	<span class="comment">// friend function</span></span><br><span class="line">  	<span class="function"><span class="keyword">friend</span> <span class="keyword">int</span> <span class="title">addFive</span><span class="params">(Distance)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	Distance() : meter(<span class="number">0</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// friend function definition</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addFive</span><span class="params">(Distance d)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// accessing private members from the friend function</span></span><br><span class="line">  d.meter += <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">return</span> d.meter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Distance D;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Distance: &quot;</span> &lt;&lt; addFive(D);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Distance: 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>這裡<code>addFive()</code>是一個友函數，可以訪問<code>private</code>和<code>public</code>的數據成員。</p>
<p>友函數更有意義的用途是對兩個不同類的對象進行操作。友函數會非常有幫助。</p>
<h5 id="示例二：添加兩個不同類的成員"><a href="#示例二：添加兩個不同類的成員" class="headerlink" title="示例二：添加兩個不同類的成員"></a>示例二：添加兩個不同類的成員</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Add members of two different classes using friend functions</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forward declaration</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span> &#123;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  		<span class="comment">// constructor to initialize numA to 12</span></span><br><span class="line">  		ClassA() : numA(<span class="number">12</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  		<span class="keyword">int</span> numA;</span><br><span class="line">  </span><br><span class="line">  		<span class="comment">// friend function declaration</span></span><br><span class="line">  		<span class="function"><span class="keyword">friend</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(ClassA, ClassB)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span> &#123;</span></span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">public</span>:</span><br><span class="line">  			<span class="comment">// constructor to initialize numB to 1</span></span><br><span class="line">  			ClassB() : numB(<span class="number">1</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">private</span>:</span><br><span class="line">  			<span class="keyword">int</span> numB;</span><br><span class="line">  </span><br><span class="line">  			<span class="comment">// friend function declaration</span></span><br><span class="line">  			<span class="function"><span class="keyword">friend</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(ClassA, ClassB)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// access members of both classes</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(ClassA objectA, ClassB objectB)</span> </span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> (objectA.numA + objectB.numB);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  	ClassA objectA;</span><br><span class="line">  	ClassB objectB;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Sum: &quot;</span> &lt;&lt; add(objectA, objectB);</span><br><span class="line">  	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Sum: 13</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在此程序中，<code>ClassA</code>和<code>ClassB</code>都聲明了友函數<code>add()</code>。因此，該函數可以訪問兩個類的private函數。</p>
<p>這裡要注意的是友函數<code>ClassA</code>使用了<code>ClassB</code>。但是我們沒有定義<code>ClassB</code>，所以我們需要將<code>ClassB</code>在程序中向前聲明。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forward declaration</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br></pre></td></tr></table></figure>

<h5 id="C-友類"><a href="#C-友類" class="headerlink" title="C++友類"></a>C++友類</h5><p>我們還可以使用<code>friend</code>關鍵字在C++使用友類，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span> &#123;</span></span><br><span class="line">  <span class="comment">// ClassB is a friend class of ClassA</span></span><br><span class="line">  <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span> &#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>將某個類聲明為友類，友類的所有成員函數都會變成友函數，由於<code>ClassB</code>是友類，我們可以從<code>ClassB</code>中訪問所有的<code>ClassA</code>成員，但是我們不能從<code>ClassA</code>訪問<code>ClassB</code>，因為C++中的友關係是賦予而不是接受。</p>
<h5 id="示例三：C-友類"><a href="#示例三：C-友類" class="headerlink" title="示例三：C++友類"></a>示例三：C++友類</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate the working of friend class</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forward declaration</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span> &#123;</span></span><br><span class="line">  	<span class="keyword">private</span>:</span><br><span class="line">  		<span class="keyword">int</span> numA;</span><br><span class="line">  </span><br><span class="line">  		<span class="comment">// friend class declaration</span></span><br><span class="line">  		<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span></span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">public</span>: </span><br><span class="line">  		<span class="comment">// constructor to initialize numA to 12</span></span><br><span class="line">  		ClassA() : numA(<span class="number">12</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span> &#123;</span></span><br><span class="line">  	<span class="keyword">private</span>:</span><br><span class="line">  		<span class="keyword">int</span> numB;</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">public</span>:</span><br><span class="line">  		<span class="comment">// constructor to initialize numB to 1</span></span><br><span class="line">  		ClassB() : numB(<span class="number">1</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// member function to add numA</span></span><br><span class="line">  	<span class="comment">// from ClassA and numB from ClassB</span></span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      ClassA objectA;</span><br><span class="line">      <span class="keyword">return</span> objectA.numA + numB;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ClassB objectB;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Sum: &quot;</span> &lt;&lt; objectB.add();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Sum: 13</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><code>ClassB</code>是<code>ClassA</code>的友類，因此，<code>ClassB</code>可以訪問<code>ClassA</code>的成員，在<code>ClassB</code>中我們創建了函數<code>add()</code>返回<code>numA</code>和<code>numB</code>的和。</p>
<p>因為<code>ClassB</code>是一個友類，我們可以在<code>ClassB</code>中創建<code>ClassA</code>的對象。</p>
<hr>
<h3 id="二十九：C-虛函數"><a href="#二十九：C-虛函數" class="headerlink" title="二十九：C++虛函數"></a>二十九：C++虛函數</h3><p>虛函數是基類中的成員函數，我們希望在派生類中重新定義它。</p>
<p>在基類中使用虛函數，確保函數被覆蓋，這適用於基類的指針指向派生類對象的情況。</p>
<p>例如，參考以下代碼：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果我們創建類<code>Base</code>的指針，指向類<code>Derived</code>的對象並調用該函數<code>print()</code>，那麼它將調用類<code>Base</code>的<code>print()</code>。</p>
<p>換句話說，函數<code>Base</code>的成員沒有被重寫。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1;</span><br><span class="line">  Base* base1 = &amp;derived1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// calls function of Base class</span></span><br><span class="line">  base-&gt;print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>為了避免這種情況，我們定義類<code>Base</code>的<code>print()</code>函數為虛函數，通過使用虛擬關鍵字。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Virtual functions are an integral part of polymorphism in C++. To learn more, check our tutorial on <a target="_blank" rel="noopener" href="https://www.programiz.com/cpp-programming/polymorphism">C++ Polymorphism</a>.</p>
<h5 id="示例一：C-虛函數"><a href="#示例一：C-虛函數" class="headerlink" title="示例一：C++虛函數"></a>示例一：C++虛函數</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Base Function&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Derived Function&quot;</span> &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Derived derived1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// pointer of Base type that points to derived1</span></span><br><span class="line">  Base* base1 = &amp;derived1;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// calls member function of Derived class</span></span><br><span class="line">  base1-&gt;print();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">	 Derived Function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>這裡，我們已經聲明了<code>Base</code>的<code>print()</code>函數作為虛函數。所以函數被覆蓋，即使我們使用了<code>Base</code>的指針指向<code>Derived</code>的對象<code>derived1</code>。</p>
<img src="https://cdn.programiz.com/sites/tutorial2program/files/cpp-virtual-function.png" style="zoom:50%;" />

<h5 id="c-覆蓋標識符"><a href="#c-覆蓋標識符" class="headerlink" title="c++覆蓋標識符"></a>c++覆蓋標識符</h5><p>C++11為我們提供了一個新的標識符<code>override</code>，該標識符對於避免使用虛函數時的錯誤非常有用。</p>
<p>該標識符指定派生類的成員函數，這些成員函數將覆蓋基類的成員函數。例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">      <span class="comment">// code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果我們在類Derived中使用函數原型並在類之外定義該函數，那麼我們將使用以下代碼：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">// function prototype</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function definition</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Derived::print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用C-覆蓋"><a href="#使用C-覆蓋" class="headerlink" title="使用C++覆蓋"></a>使用C++覆蓋</h5><p>使用虛函數時，在聲明派生類的成員函數時可能會出錯。</p>
<p>使用<code>override</code>標識符會提示編譯器在出現錯誤時顯示錯誤信息，不然程序會執行變異，虛擬函數不會被覆蓋。</p>
<p>其中可能的一些錯誤是：</p>
<ul>
<li><strong>名稱不正確的函數：</strong>如果基類中的虛函數被命名為<code>print()</code>，但是我們不小心將派生類中的覆蓋函數命名為了<code>pint()</code>。</li>
<li><strong>具有不同返回類型的函數：</strong>如果說虛函數時<code>void</code>類型，但派生類中的函數是int類型。</li>
<li><strong>具有不同參數的函數：</strong>如果虛函數的參數和派生類中的函數不匹配。</li>
<li>在基類中沒有聲明任何虛函數。</li>
</ul>
<h5 id="C-虛函數的使用"><a href="#C-虛函數的使用" class="headerlink" title="C++虛函數的使用"></a>C++虛函數的使用</h5><p>假設我們有一個基類<code>Animal</code>和派生類<code>Dog</code>和<code>Cat</code>。</p>
<p>假設每個類都有一個名為type的數據成員，假設止血變量是通過他們各自的構造函數初始化的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> type:</span><br><span class="line">  ... .. ...</span><br><span class="line">   <span class="keyword">public</span>:</span><br><span class="line">  Anima(): type(<span class="string">&quot;Animal&quot;</span>) &#123;&#125;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> type;</span><br><span class="line">  ... .. ...</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	Animal(): type(<span class="string">&quot;Dog&quot;</span>) &#123;&#125;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> type;</span><br><span class="line">  ... .. ...</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	Animal(): type(<span class="string">&quot;Cat&quot;</span>) &#123;&#125;</span><br><span class="line">  ... .. ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>現在，讓我們假設我們的程序要求我們的public為每個類創建兩個函數：</p>
<p>1.<code>getType()</code>返回<code>type</code>值</p>
<p>2.<code>print()</code>打印<code>type</code>值</p>
<p>我們可以在每個類中分別創建兩個函數並覆蓋他們，但是這冗長又乏味。</p>
<p>或者我們在類中將<code>getType()</code>在類<code>Animal</code>中虛化，然後創建單獨的<code>print()</code>函數，函數接受<code>Animal</code>的指針作為參數，然後我們使用單個函數來覆蓋虛函數。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  ... .. ...</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  ... .. ...</span><br><span class="line">    <span class="keyword">virtual</span> <span class="built_in">string</span> getType &#123;...&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">... .. ...</span><br><span class="line">... .. ...</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(Animal* ani)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Animal: &quot;</span> &lt;&lt; ani-&gt;getType() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這會使代碼更短，更簡潔，重複性更低。</p>
<h5 id="示例二：C-虛函數演示"><a href="#示例二：C-虛函數演示" class="headerlink" title="示例二：C++虛函數演示"></a>示例二：C++虛函數演示</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++ program to demonstrate the use of virtual function</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> &#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> type;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="comment">// constructor to initialize type</span></span><br><span class="line">  	Animal() : type(<span class="string">&quot;Animal&quot;</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// declare virtual function</span></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> type;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	<span class="built_in">string</span> type;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="comment">// constructor to initialize type</span></span><br><span class="line">  	Dog() : type(<span class="string">&quot;Dog&quot;</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="built_in">string</span> <span class="title">getType</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> :</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">   	<span class="built_in">string</span> type;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="comment">// constructor to initialize type</span></span><br><span class="line">  	Cat() : type(<span class="string">&quot;Cat&quot;</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="built_in">string</span> <span class="title">getType</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">      	<span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(Animal* ani)</span> </span>&#123;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Animal: &quot;</span>&lt;&lt; ani-&gt;getType() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Animal* animal1 = <span class="keyword">new</span> Animal();</span><br><span class="line">  Animal* dog1 = <span class="keyword">new</span> Dog();</span><br><span class="line">  Animal* cat1 = <span class="keyword">new</span> Cat();</span><br><span class="line">  </span><br><span class="line">  print(animal1);</span><br><span class="line">  print(dog1);</span><br><span class="line">  print(cat1);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Animal: Animal</span></span><br><span class="line"><span class="comment">   Animal: Dog</span></span><br><span class="line"><span class="comment">   Animal: Cat</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>這裡，我們使用了虛函數<code>getType()</code>和一個<code>Animal</code>的指針<code>ani</code>避免在每個類中都重複<code>print()</code>函數。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(Animal* ani)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Animal: &quot;</span> &lt;&lt; ani-&gt;getType() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>main()</code>，我們創建了三個<code>Animal</code>指針，動態創建<code>Animal</code>，<code>Dog</code>，<code>Cat</code>的對象。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dynamically create objects using Animal pointers</span></span><br><span class="line">Animal* animal1 = <span class="keyword">new</span> Animal();</span><br><span class="line">Animal* dog1 = <span class="keyword">new</span> Dog();</span><br><span class="line">Animal* cat1 = <span class="keyword">new</span> Cat();</span><br></pre></td></tr></table></figure>

<p>當然後我們使用指針調用<code>print()</code>函數：</p>
<p>1.當<code>print(animal1)</code>被調用，指針指向<code>Animal</code>對象。然後虛函數類<code>Animal</code>中執行<code>print()</code>。</p>
<p>2.當<code>print(dog1)</code>被調用，指針指向<code>Dog</code>對象。虛函數被覆蓋，函數<code>Dog</code>內執行<code>print()</code>。</p>
<p>3.當<code>print(cat1)</code>被調用，指針指向<code>Cat</code>對象。虛函數被覆蓋，函數<code>Cat</code>內執行<code>print()</code>。</p>
<hr>
<h3 id="三十：C-模板"><a href="#三十：C-模板" class="headerlink" title="三十：C++模板"></a>三十：C++模板</h3><p>模板是C++的強大功能，可以讓你編寫通用程序。簡而言之，你可以使用模版創建一個函數或一個類來處理不同的數據類型。</p>
<p>模板通常在較大的代碼庫中使用，目的是實現代碼的可重用性和靈活性。</p>
<p>模板的概念可以有兩種不同的方式使用：</p>
<ul>
<li>函數模板</li>
<li>類模板</li>
</ul>
<h5 id="函數模板"><a href="#函數模板" class="headerlink" title="函數模板"></a>函數模板</h5><p>函數模板的工作方式與普通函數相似，只有一個不同之處。</p>
<p>單個函數模板可以一次處理不同的數據類型，但是單個普通函數只能處理一組數據類型。</p>
<p>通常，如果需要對兩種或多種類型的數據執行相同的操作，則可以使用函數重載來創建具有所需函數聲明的兩個函數。</p>
<p>但是，更好的方法是使用函數模板，因為您可以執行較少的代碼並維護代碼來執行相同的任務。</p>
<p>如何聲明函數模板</p>
<p>通過關鍵字<strong>template</strong>並在模板參數/s 接入<code>&lt;&gt;</code>跟隨在函數聲明之後。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="function">T <span class="title">someFunction</span><span class="params">(T arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">... .. ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>T</code>是一個接受不同類型數據的模板參數，<code>class</code>是一個關鍵字。</p>
<p>你可以使用關鍵字<code>typename</code>取代<code>class</code>的例子。</p>
<p>當數據類型的參數被傳遞到<code>someFunction()</code>，編譯器會給<code>someFunction()</code>數據類型生成新的版本。</p>
<h5 id="示例一：函數模板-找到最大數"><a href="#示例一：函數模板-找到最大數" class="headerlink" title="示例一：函數模板-找到最大數"></a>示例一：函數模板-找到最大數</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If two characters are passed to function template, character with larger ASCII value is displayed.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// template function</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line">  <span class="function">T <span class="title">Large</span><span class="params">(T n1, T n2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> (n1 &gt; n2) ? n1 : n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i1, i2;</span><br><span class="line">  <span class="keyword">float</span> f1, f2;</span><br><span class="line">  <span class="keyword">char</span> c1, c2;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Enter two integers: \n&quot;</span>;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; i1 &gt;&gt; i2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; Large(i1, i2) &lt;&lt; <span class="string">&quot; is larger.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\n Enter two floating-point numbers: \n&quot;</span>;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; f1 &gt;&gt; f2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; Large(f1, f2) &lt;&lt; <span class="string">&quot; is larger.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nEnter two characters:\n&quot;</span>;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; c1 &gt;&gt; c2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; Large(c1, c2) &lt;&lt; <span class="string">&quot; has larger ASCII value&quot;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Enter two integers:</span></span><br><span class="line"><span class="comment">   5</span></span><br><span class="line"><span class="comment">   10</span></span><br><span class="line"><span class="comment">   10 is larger.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   Enter two floating-point numbers:</span></span><br><span class="line"><span class="comment">   12.4</span></span><br><span class="line"><span class="comment">   10.2</span></span><br><span class="line"><span class="comment">   12.4 is larger.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   Enter two characters:</span></span><br><span class="line"><span class="comment">   z</span></span><br><span class="line"><span class="comment">   Z</span></span><br><span class="line"><span class="comment">   z has larger ASCII value.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在上面的程序中，我們定義了一個可以接受兩個參數<code>n1</code>和<code>n2</code>的函數模板<code>Large()</code>。T表示參數可以是任何數據類型。</p>
<p><code>Large()</code>函數使用簡單的條件曹族喔返回兩個參數裡面最大的一個。</p>
<p><code>main()</code>函數，有聲明三種不同數據類型的變量：<code>int</code>，<code>float</code>和<code>char</code>。然後將變量<code>Large()</code>作為普通函數傳遞到函數模板。</p>
<p>在運行時，將整數傳遞給模板函數時，編譯器知道它必須生成一個<code>Large()</code>函數來接受<code>int</code>參數。</p>
<p>同樣，當傳遞<code>float</code>和<code>char</code>時，它知道自變量數據類型並相應地生成<code>Large()</code>函數。</p>
<h5 id="示例二：使用函數模板交換數據"><a href="#示例二：使用函數模板交換數據" class="headerlink" title="示例二：使用函數模板交換數據"></a>示例二：使用函數模板交換數據</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(T &amp;n1, T &amp;n2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  T temp;</span><br><span class="line">  temp = n1;</span><br><span class="line">  n1 = n2;</span><br><span class="line">  n2 = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i1 = <span class="number">1</span>, i2 = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">float</span> f1 = <span class="number">1.1</span>, f2 = <span class="number">2.2</span>;</span><br><span class="line">  <span class="keyword">char</span> c1 = <span class="string">&#x27;a&#x27;</span>, c2 = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Before passing data to function template.\n&quot;</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;i1 = &quot;</span> &lt;&lt; i1 &lt;&lt; <span class="string">&quot;\ni2 = &quot;</span> &lt;&lt; i2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nf2 = &quot;</span> &lt;&lt; i2 &lt;&lt; <span class="string">&quot;\nf2 = &quot;</span> &lt;&lt; f2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nc1 = &quot;</span> &lt;&lt; c1 &lt;&lt; <span class="string">&quot;\nc2 = &quot;</span> &lt;&lt; c2;</span><br><span class="line">  </span><br><span class="line">  Swap(i1, i2);</span><br><span class="line">  Swap(f1, f2);</span><br><span class="line">  Swap(c1, c2);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\n\nAfter passing data to function template. \n&quot;</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;i1 = &quot;</span> &lt;&lt; i1 &lt;&lt; <span class="string">&quot;\ni2 = &quot;</span> &lt;&lt; i2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nf1 = &quot;</span> &lt;&lt; f1 &lt;&lt; <span class="string">&quot;\nf2 = &quot;</span> &lt;&lt; f2;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;\nc1 = &quot;</span> &lt;&lt; c1 &lt;&lt; <span class="string">&quot;\nc2 = &quot;</span> &lt;&lt; c2;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Before passing data to function template.</span></span><br><span class="line"><span class="comment">   i1 = 1</span></span><br><span class="line"><span class="comment">   i2 = 2</span></span><br><span class="line"><span class="comment">   f1 = 1.1</span></span><br><span class="line"><span class="comment">   f2 = 2.2</span></span><br><span class="line"><span class="comment">   c1 = a</span></span><br><span class="line"><span class="comment">   c2 = b</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   After passing data to function template.</span></span><br><span class="line"><span class="comment">   i1 = 2</span></span><br><span class="line"><span class="comment">   i2 = 1</span></span><br><span class="line"><span class="comment">   f1 = 2.2</span></span><br><span class="line"><span class="comment">   f2 = 1.1</span></span><br><span class="line"><span class="comment">   c1 = b</span></span><br><span class="line"><span class="comment">   c2 = a</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在此程序中，不是通過傳遞值來調用函數，而是通過引用來進行調用。</p>
<p><code>Swap()</code>函數模板應用需要兩個參數來交換它們。</p>
<h5 id="Class模板"><a href="#Class模板" class="headerlink" title="Class模板"></a>Class模板</h5><p>與函數模板，你也可以通過類來創建類模板。</p>
<p>你需要一個適用所有類的類實現，只是所使用的數據類型不同。</p>
<p>通常，你需要為每種數據類型創建一個不同的類，或者在一個類中創建不同的成員變量和函數。</p>
<p>這將不必要的擴大你的代碼庫，並難以維護，因為更改時應對所有類/所有類作用的函數/函數。類模板對所有數據類型復用代碼變得容易。</p>
<p>如何聲明一個類模板？</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">className</span></span></span><br><span class="line"><span class="class">  &#123;</span></span><br><span class="line">    ... .. ...</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	T var;</span><br><span class="line">    	<span class="function">T <span class="title">someOperation</span> <span class="params">(T arg)</span></span>;</span><br><span class="line">    ... .. ... </span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>在上面的聲明中，<code>T</code>是template參數，它是所使用數據類型的佔位符。</p>
<p>在class中，一個成員變量<code>var</code>和成員函數<code>someOperation()</code>都是type<code>T</code>。</p>
<p>如何創建類模板對象？</p>
<p>要創建類模板對象，你需要在<code>&lt;&gt;</code>內定義數據類型。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">className&lt;dataType&gt; classObject;</span><br></pre></td></tr></table></figure>

<p>舉例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">className&lt;<span class="keyword">int</span>&gt; classObject;</span><br><span class="line">className&lt;<span class="keyword">float</span>&gt; classObject;</span><br><span class="line">className&lt;<span class="built_in">string</span>&gt; classObject;</span><br></pre></td></tr></table></figure>

<h5 id="示例三：使用類模板的簡單計算器"><a href="#示例三：使用類模板的簡單計算器" class="headerlink" title="示例三：使用類模板的簡單計算器"></a>示例三：使用類模板的簡單計算器</h5><p>程序使用類模板對兩個數字進行加，減，乘除運算。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;clas T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  	T num1, num2;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	Calculator(T n1, T n2)</span><br><span class="line">    &#123;</span><br><span class="line">      	num1 = n1;</span><br><span class="line">      	num2 = n2;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">displayResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Numbers are: &quot;</span> &lt;&lt; num1 &lt;&lt; <span class="string">&quot; and &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot;.&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Addition is: &quot;</span> &lt;&lt; add() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Subtraction is: &quot;</span> &lt;&lt; subtract() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Product is: &quot;</span> &lt;&lt; multiply() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Division is: &quot;</span> &lt;&lt; divide() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function">T <span class="title">add</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> num1 + num2; &#125;</span><br><span class="line">  	<span class="function">T <span class="title">subtract</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> num1 - num2; &#125;</span><br><span class="line">  	<span class="function">T <span class="title">multiply</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> num1 * num2; &#125;</span><br><span class="line">  	<span class="function">T <span class="title">divide</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> num1 / num2; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  	<span class="function">Calculator&lt;<span class="keyword">int</span>&gt; <span class="title">intCalc</span><span class="params">(<span class="number">2</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  	<span class="function">Calculator&lt;<span class="keyword">float</span>&gt; <span class="title">floatCalc</span><span class="params">(<span class="number">2.4</span>, <span class="number">1.2</span>)</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Int results: &quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  	intCalc.displayResult();</span><br><span class="line">  </span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">&quot;Float results: &quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  	floatCalc.displayResult();</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* OUTPUT</span></span><br><span class="line"><span class="comment">   Int results:</span></span><br><span class="line"><span class="comment">   Numbers are: 2 and 1.</span></span><br><span class="line"><span class="comment">   Addition is: 3</span></span><br><span class="line"><span class="comment">   Subtraction is: 1</span></span><br><span class="line"><span class="comment">   Product is: 2</span></span><br><span class="line"><span class="comment">   Division is: 2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   Float results:</span></span><br><span class="line"><span class="comment">   Numbers are: 2.4 and 1.2.</span></span><br><span class="line"><span class="comment">   Addition is: 3.6</span></span><br><span class="line"><span class="comment">   Subtraction is: 1.2</span></span><br><span class="line"><span class="comment">   Product is: 2.88</span></span><br><span class="line"><span class="comment">   Division is: 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>在上面的程序中，<code>Calculator</code>聲明了一個類模板。</p>
<p>該類包含兩個類型為的私有成員<code>T</code>：<code>num1</code>和<code>num2</code>。以及初始化成員的構造函數。</p>
<p>它還包含公共成員函數，用戶計算數字的加減乘除，這些數返回用戶定義的數據類型的值。<code>displayResult()</code>將最終輸出到屏幕的函數。</p>
<p>在該main()函數，分別為數據類型創建兩個<code>Calculator</code>對象：和。</p>
<p>使用構造函數初始化值：<code>intCalc</code>, <code>floatCalc</code>, <code>int</code>, <code>float</code>。</p>
<p>我們在創建對象時使用<code>int</code>和<code>float</code>。這些告訴編譯器用於類創建的數據類型。</p>
<p>這將為<code>int</code>創建每個類的定義<code>float</code>，然後相應地使用它們。</p>
<p>然後，<code>displayResult()</code>兩個對象都被調用，這將執行計算操作並顯示。</p>

    </div>

    <div class="about">
        <h1>About this Post</h1>
        <p>This post is written by Siqi Shu, licensed under <a
                target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a>.</p>
    </div>
</article>
        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h4 class="title">深智一物 眾隱皆變</h4>
                
            </div>
            
        </div>
        &copy; 2024 Siqi Shu<br />
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
<script src="/js/kursor.js"></script>

        
<script src="/js/run.js"></script>


    </body>
</html>
